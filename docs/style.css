:root{
  --bg:#161512;
  --panel:#262421;
  --panel2:#1f1d1a;
  --border:#3c3934;
  --accent:#95bb4a;
  --text:#ffffff;
  --muted:#a9a9a9;

  /* Tamaño base del tablero (se ajusta en móvil) */
  --sq: 72px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* ===== Header ===== */
.main-header{
  width:100%;
  padding:12px 12px 0 12px;
  display:flex;
  justify-content:center;
}
.academy-status{
  width:min(1100px, 96vw);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  background:var(--panel);
  padding:12px 14px;
  border-radius:16px;
  border:1px solid var(--border);
}

.player-profile{
  display:flex;
  align-items:center;
  gap:10px;
  min-width: 220px;
}
.avatar-wrapper{
  width:52px;
  height:52px;
  border-radius:14px;
  background:var(--panel2);
  border:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}
.user-avatar{
  width:60px;
  height:60px;
}
.player-info{
  display:flex;
  flex-direction:column;
  line-height:1.1;
}
.p-rank{ font-size:.78rem; color:var(--muted); }
.p-name{ font-size:1.05rem; font-weight:700; letter-spacing:.3px; }
.p-score{
  margin-left:auto;
  min-width:34px;
  text-align:center;
  font-weight:800;
  font-size:1.1rem;
  padding:6px 10px;
  border-radius:12px;
  background:var(--panel2);
  border:1px solid var(--border);
}

.adv-badge{
  margin-top:6px;
  font-size:.75rem;
  background:#3a3a3a;
  padding:2px 8px;
  border-radius:999px;
  color:var(--accent);
  font-weight:800;
  display:inline-block;
  min-height: 18px;
  width: fit-content;
}

/* ===== Clock ===== */
.central-clock{
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:8px;
  text-align:center;
  min-width: 240px;
}
.timer-display{
  font-size:1.65rem;
  font-weight:900;
  letter-spacing:1px;
}
.timer-sub{
  font-size:.65rem;
  color:var(--muted);
  margin-top:-4px;
}

.setup-match{
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:center;
  width:100%;
}
.input-guest{
  width:min(260px, 40vw);
  padding:10px 12px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#101010;
  color:#fff;
  outline:none;
}
.btn-start{
  padding:10px 14px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#e8e8e8;
  color:#111;
  font-weight:900;
  cursor:pointer;
}
.btn-start:active{ transform: translateY(1px); }

.turn-announcer{
  font-weight:900;
  color:var(--accent);
  font-size:.85rem;
  text-transform:uppercase;
}

/* ===== Layout ===== */
.layout{
  width:min(1100px, 96vw);
  margin:14px auto 18px auto;
  display:flex;
  gap:14px;
  align-items:flex-start;
  justify-content:center;
  padding:0 12px;
}

/* ===== Board ===== */
.board-container{
  flex: 0 0 auto;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px;
  padding:12px;
}

.board{
  width: calc(var(--sq) * 8);
  height: calc(var(--sq) * 8);
  border-radius:12px;
  border:6px solid #333;
  background:#111;
  display:grid;
  grid-template-columns: repeat(8, var(--sq));
  grid-template-rows: repeat(8, var(--sq));
  overflow:hidden;

  /* evita scroll accidental mientras juegas en móvil */
  touch-action: none;
  -webkit-user-select:none;
  user-select:none;
}

.square{
  width: var(--sq);
  height: var(--sq);
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
}
.square.light{ background:#dee3e6; }
.square.dark{ background:#8ca2ad; }

.piece{
  width: calc(var(--sq) * 0.92);
  height: calc(var(--sq) * 0.92);
  background-size: contain;
  background-repeat:no-repeat;
  background-position:center;
  cursor: grab;
}

.board.flipped{ transform: rotate(180deg); }
.board.flipped .piece{ transform: rotate(180deg); }

.square.last-move{
  outline: 3px solid rgba(245, 246, 130, 0.65);
  outline-offset: -3px;
}

/* check highlight */
.square.in-check{
  background: radial-gradient(circle, #ff4d4d 20%, #b33939 100%) !important;
  animation: pulse-check 0.8s infinite;
}
@keyframes pulse-check{ 0%{opacity:1} 50%{opacity:.82} 100%{opacity:1} }

/* Tap-to-move UI */
.square.hint::after{
  content:"";
  width: 26%;
  height: 26%;
  border-radius: 999px;
  background: rgba(0,0,0,0.25);
  border: 2px solid rgba(0,0,0,0.25);
  position:absolute;
}
.square.capture-hint::after{
  width: 78%;
  height: 78%;
  background: rgba(255, 60, 60, 0.18);
  border: 2px solid rgba(255, 60, 60, 0.40);
}
.square.selected{
  outline: 4px solid rgba(149,187,74,0.85);
  outline-offset: -4px;
}

/* ===== Controls ===== */
.controls{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:10px;
}

.btn-large{
  flex: 1 1 140px;
  padding: 12px 10px;
  font-size: 0.95rem;
  border-radius: 12px;
  cursor:pointer;
  font-weight:900;
  background:#3c3934;
  color:#fff;
  border:1px solid var(--border);
}
.btn-large:active{ transform: translateY(1px); }
.btn-danger{ background:#4a1f1f; border-color:#5a2a2a; }
.btn-profesor.active{ background:#9b59b6 !important; }

.mobile-hint{
  margin-top:10px;
  color: var(--muted);
  font-size: .85rem;
  line-height: 1.2;
}

/* ===== Sidebar ===== */
.sidebar{
  width: 320px;
  max-width: 92vw;
  background:var(--panel);
  border-radius:16px;
  border:1px solid var(--border);
  overflow:hidden;
}
.sidebar-header{
  padding:12px 12px;
  font-weight:900;
  border-bottom:1px solid var(--border);
}
.moves-list{
  margin:0;
  padding:12px 16px;
  height: calc(var(--sq) * 8 + 74px);
  overflow:auto;
  font-size: .9rem;
}
.hidden{ display:none !important; }

/* ===== Responsive: móvil ===== */
@media (max-width: 900px){
  :root{
    /* Tablero ocupa el ancho del teléfono */
    --sq: min(11.5vw, 56px);
  }

  .academy-status{
    flex-direction:column;
    align-items:stretch;
    gap:10px;
  }
  .player-profile{
    min-width: unset;
    justify-content:space-between;
  }

  .layout{
    flex-direction:column;
    align-items:center;
  }

  .board-container{
    width: 100%;
  }

  .board{
    margin: 0 auto;
  }

  .sidebar{
    width: 100%;
  }

  .moves-list{
    height: 220px;
  }

  .setup-match{
    flex-direction:column;
    gap:10px;
  }
  .input-guest{
    width: 100%;
  }
  .btn-start{
    width: 100%;
  }
}
